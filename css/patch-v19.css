/* ===== patch-v6.css ===== */
/* patch-v6.css
   هدف: حفظ تم قدیمی + اضافه کردن استایل‌های لازم برای فیچرهای جدید (بای‌لینگوال، کوییز، گرامر پیشرفته)
*/
:root{
  --chip: color-mix(in srgb, var(--card) 70%, transparent);
}

/* ---------- Bilingual reveal (click EN to show FA) ---------- */
.bi-line{ margin-top:8px; }
.bi-line .en{ cursor:pointer; font-weight:650; }
.bi-line .fa{ margin-top:6px; direction:rtl; text-align:right; color:var(--muted); line-height:1.8; }
.isHidden{ display:none !important; }
.toggle-fa.isOpen{ opacity:.9; }

/* ---------- Quiz card ---------- */
.quiz-card{ padding:14px; border:1px solid var(--border); border-radius:16px; background:color-mix(in srgb, var(--card) 92%, transparent); }
.quiz-q{ font-weight:700; margin-bottom:10px; }
.quiz-opts{ display:grid; gap:10px; }
.quiz-opt{
  text-align:left;
  border:1px solid var(--border);
  border-radius:14px;
  background:color-mix(in srgb, var(--bg) 65%, transparent);
  padding:10px 12px;
  cursor:pointer;
}
.quiz-opt:hover{ transform: translateY(-1px); }
.quiz-opt.is-correct{ border-color: color-mix(in srgb, var(--accent) 70%, var(--border)); }
.quiz-opt.is-wrong{ border-color: color-mix(in srgb, #ef4444 70%, var(--border)); }
details.answer{ margin-top:10px; }

/* ---------- Grammar blocks (new schema) ---------- */
.grammarBlocks{ display:grid; gap:12px; margin-top:10px; }
.grammarBlock{
  border:1px solid var(--border);
  border-radius:18px;
  padding:14px 14px;
  background:color-mix(in srgb, var(--card) 92%, transparent);
}
.grammarHead{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  margin-bottom:8px;
}
.grammarHead h6{ margin:0; font-size:1rem; line-height:1.35; }
.gBadge{
  font-size:.78rem;
  padding:5px 10px;
  border:1px solid var(--border);
  border-radius:999px;
  background:var(--chip);
  opacity:.95;
  white-space:nowrap;
}
.pillRow{ display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; }
.pill{
  padding:5px 10px;
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--chip);
  font-size:.82rem;
}
.exampleList{
  list-style:none;
  padding:0;
  margin:10px 0 0;
  display:grid;
  gap:10px;
}
.exampleList li{
  border:1px solid var(--border);
  border-radius:14px;
  padding:10px 12px;
  background:color-mix(in srgb, var(--bg) 65%, transparent);
}
.exampleMeta{
  display:flex;
  gap:8px;
  align-items:center;
  margin-bottom:6px;
}
.metaPill{
  padding:4px 9px;
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--chip);
  font-size:.75rem;
  opacity:.95;
}

/* ---------- Collocation items (if used) ---------- */
.colloc-list{ display:grid; gap:12px; }
.colloc-item{ padding:14px; border:1px solid var(--border); border-radius:18px; background:color-mix(in srgb, var(--card) 92%, transparent); }


/* ---------- Small chips (synonyms/antonyms) ---------- */
.grid2{ display:grid; grid-template-columns: 1fr 1fr; gap:14px; }
@media (max-width: 720px){ .grid2{ grid-template-columns:1fr; } }
.chips{ display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; }
.chip{
  display:inline-flex; align-items:center;
  padding:6px 10px;
  border-radius:999px;
  background: var(--chip);
  border:1px solid color-mix(in srgb, var(--text) 12%, transparent);
  font-size: 13px;
  line-height:1;
}



/* ---------- Dictionary page responsiveness ---------- */
.page-dictionary .row{ flex-wrap:wrap; }
.page-dictionary #matches{ max-height: 52vh; overflow:auto; }
.page-dictionary #entry{ max-height: 52vh; overflow:auto; }
@media (max-width: 880px){
  .page-dictionary .header-inner nav{ overflow:auto; white-space:nowrap; }
  .page-dictionary .row.gap-md{ flex-direction:column; }
  .page-dictionary .col.col-6{ width:100% !important; flex: 1 1 auto !important; }
  .page-dictionary .col.col-auto{ width:100% !important; }
  .page-dictionary #btnClear{ width:100%; margin-top: 8px; }
}
@media (max-width: 520px){
  .page-dictionary .card-title{ font-size: 1.15rem; }
  .page-dictionary .subcard-header{ flex-direction:column; align-items:flex-start; gap:6px; }
}

/* ---------- Selection lookup button ---------- */
.sel-lookup-btn{
  position:absolute;
  z-index:9999;
  padding:8px 10px;
  border-radius:12px;
  border:1px solid color-mix(in srgb, var(--border) 80%, transparent);
  background: color-mix(in srgb, var(--card) 86%, black);
  color: var(--text, #e5e7eb);
  font-weight:650;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  cursor:pointer;
}
.sel-lookup-btn:hover{ transform: translateY(-1px); }



/* ===== v11 Responsive + Dictionary (letter-based) ===== */

/* Dictionary matches as chips */
#matches.list{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:flex-start;
}
#matches.list .match-item{
  display:inline-flex;
  align-items:center;
  padding:6px 10px;
  border:1px solid var(--border);
  border-radius:999px;
  background:var(--bg-card);
  color:inherit;
  text-decoration:none;
  max-width:100%;
}
#matches.list .match-item:hover{ transform: translateY(-1px); }

/* Dictionary entry chips */
.dictChips{ margin-top:14px; display:grid; gap:12px; }
.chipGroup{ padding:10px; border:1px solid var(--border); border-radius:14px; background:var(--bg-card); }
.chipTitle{ font-weight:700; margin-bottom:8px; }
.chipRow{ display:flex; flex-wrap:wrap; gap:8px; }
.chipRow .chip{
  display:inline-flex;
  padding:6px 10px;
  border:1px solid var(--border);
  border-radius:999px;
  text-decoration:none;
  color:inherit;
  background:rgba(255,255,255,0.02);
}
.chipRow .chip:hover{ transform: translateY(-1px); }

/* Lesson tables / long code blocks */
.lesson-details table,
.lesson-details .table{
  width:100%;
  max-width:100%;
}
.lesson-details table{
  display:block;
  overflow-x:auto;
  -webkit-overflow-scrolling: touch;
}
.lesson-details table thead,
.lesson-details table tbody,
.lesson-details table tr{
  width:100%;
}
.lesson-details pre{
  max-width:100%;
  overflow:auto;
}

/* General small-screen tightening */
@media (max-width: 720px){
  .container{ padding-left:14px; padding-right:14px; }
  .subcard{ padding:14px; }
  .card{ padding:14px; }
  .lesson-layout{ grid-template-columns: 1fr; }
  .lesson-toc{
    position: static;
    top:auto;
    max-height:none;
    margin-bottom: 12px;
  }
  .subcard-header{
    flex-direction:column;
    align-items:flex-start;
    gap:8px;
  }
}

@media (max-width: 420px){
  #matches.list .match-item{ width:100%; justify-content:space-between; }
  .chipRow .chip{ width:100%; justify-content:space-between; }
}

.lesson-details img{max-width:100%;height:auto;}


/* === v12 FA toggle system === */
.fa-toggle-btn{display:inline-flex;align-items:center;justify-content:center;width:22px;height:22px;padding:0;border-radius:999px;}
.fa-toggle-btn:hover{ background: rgba(255,255,255,.10); }
.fa-toggle-btn:active{ transform: translateY(1px); }
.fa-hidden{ display:none !important; }
.fa-shown{ display:block; }
/* Persian blocks nicer */
.fa-block{
  direction: rtl;
  text-align: right;
  padding: .55rem .7rem;
  border-radius: .9rem;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  margin-top: .35rem;
}
/* === v12 Dictionary + Word responsive tweaks === */
@media (max-width: 760px){
  .page-lesson .lesson-header,
  .page-lesson .lesson-meta{ gap:.6rem; }
  .page-lesson .lesson-grid{ grid-template-columns: 1fr !important; }
  .page-lesson .lesson-toc{ position: static !important; max-height: none !important; }
  .page-lesson .lesson-content{ padding: .9rem !important; }
  .page-dictionary .dict-grid{ grid-template-columns:1fr !important; }
  .page-word .word-grid{ grid-template-columns:1fr !important; }
  .page-word .chip-row{ flex-wrap:wrap !important; }
}


/* === v13: linkified English words in lessons === */
.word-link{
  text-decoration: underline;
  text-decoration-thickness: .08em;
  text-underline-offset: .15em;
  cursor: pointer;
}
.word-link:hover{ filter: brightness(1.08); }

/* === v13: stronger responsive for lesson pages === */
@media (max-width: 980px){
  .page-lesson .lesson-grid{ grid-template-columns: 1fr !important; }
  .page-lesson .lesson-toc{ position: static !important; max-height: none !important; }
}
@media (max-width: 520px){
  .appHeader{ padding: .75rem .75rem !important; }
  .container{ padding-left: .75rem !important; padding-right: .75rem !important; }
  .page-lesson .lesson-content{ padding: .85rem !important; }
}


/* ===== patch-v14.css ===== */

/* patch-v14.css
   هدف: یکسان‌سازی ظاهر بین صفحات، رفع ریسپانسیو (responsive) دیکشنری/درس/صفحه لغت،
   و کنترل برخی تداخل‌های آبشاری (cascade) بدون شکستن تم‌های قبلی.
*/

:root{
  --bp-mobile: 768px;
  --bp-tablet: 1024px;
}

/* ---------- Generic layout helpers ---------- */
.grid2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
@media (max-width: 768px){
  .grid2{ grid-template-columns: 1fr; }
}

.panel{
  background: var(--card, rgba(255,255,255,.06));
  border: 1px solid var(--border, rgba(255,255,255,.12));
  border-radius: 14px;
  padding: 12px 14px;
}

.mini-list{
  margin: 8px 0 0;
  padding-inline-start: 18px;
}
.mini-list li{ margin: 6px 0; }
.mini-list code{
  padding: 2px 6px;
  border-radius: 8px;
  background: rgba(0,0,0,.12);
  border: 1px solid rgba(0,0,0,.08);
}

/* ---------- Word page (word.html) ---------- */
.wordSection h2, .wordSection h3{
  scroll-margin-top: 90px;
}
.exCard{
  border: 1px solid var(--border, rgba(255,255,255,.12));
  border-radius: 14px;
  padding: 10px 12px;
  margin-top: 10px;
}
.exEn{ font-weight: 650; line-height: 1.55; }
.exFa{ margin-top: 6px; }

/* ---------- Dictionary page responsive ---------- */
.dictLayout{
  display:grid;
  grid-template-columns: 320px 1fr;
  gap: 12px;
}
@media (max-width: 900px){
  .dictLayout{ grid-template-columns: 1fr; }
  .dictSidebar{ position: static !important; top:auto !important; }
}

/* Make long lists scroll nicely */
.dictResults{
  max-height: calc(100vh - 180px);
  overflow:auto;
}

/* ---------- Lesson cards/layout tweaks ---------- */
/* Avoid overflow in small screens */
.lessonHeader, .lessonTop, .lessonMeta{
  word-break: break-word;
}


/* ---------- Dictionary (page-dictionary) responsive ---------- */
.page-dictionary .row{ flex-wrap: wrap; }
@media (max-width: 900px){
  .page-dictionary .col{ flex: 1 1 100% !important; width: 100% !important; }
  .page-dictionary .col-6{ flex: 1 1 100% !important; width: 100% !important; }
  .page-dictionary .card{ overflow: hidden; }
  .page-dictionary .list{ max-height: 52vh; overflow:auto; }
  .page-dictionary .entry{ word-break: break-word; }
}


/* ---------- FA toggle blocks ---------- */
.fa-hidden{ display:none; }
.fa-toggle-btn{display:inline-flex;align-items:center;justify-content:center;width:22px;height:22px;padding:0;border-radius:999px;}
.fa-block{
  margin-top: 8px;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px dashed rgba(255,255,255,.18);
  background: rgba(255,255,255,.04);
  line-height: 1.75;
}


/* ===== patch-v15.css ===== */
/* === v15 fa toggle icon === */
.fa-toggle-btn{display:inline-flex;align-items:center;justify-content:center;width:22px;height:22px;padding:0;border-radius:999px;}
.fa-toggle-btn:hover{ background: rgba(255,255,255,.10); }
.fa-toggle-btn:active{ transform: translateY(1px); }
.fa-toggle-btn svg{ width: 14px; height: 14px; opacity: .9; }
.fa-toggle-btn.is-open{ background: rgba(255,255,255,.14); }

.fa-block{
  direction: rtl;
  text-align: right;
  padding: .55rem .7rem;
  border-radius: .9rem;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  margin-top: .4rem;
  line-height: 1.75;
}
.fa-hidden{ display:none !important; }
.fa-shown{ display:block; }

/* === v15 lesson declutter === */
.lesson-section{
  margin: .9rem 0;
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 1rem;
  background: rgba(255,255,255,.03);
  overflow: hidden;
}
.lesson-section > summary{
  list-style: none;
  cursor: pointer;
  padding: .75rem .9rem;
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap:.6rem;
  user-select:none;
  font-weight: 700;
}
.lesson-section > summary::-webkit-details-marker{ display:none; }
.lesson-section > summary .muted{ font-weight: 500; opacity:.8; }
.lesson-section[open] > summary{ background: rgba(255,255,255,.05); }
.lesson-section .section-body{ padding: .85rem .95rem; }

/* Better spacing around tables */
table{ border-collapse: collapse; }
.table-wrap{ overflow:auto; border-radius: .9rem; border:1px solid rgba(255,255,255,.10); }
.table-wrap table{ width:100%; }
.table-wrap + *{ margin-top: .9rem !important; }
.section-body p{ margin: .55rem 0; }
.section-body ul, .section-body ol{ margin: .55rem 0 .8rem; padding-inline-start: 1.2rem; }


/* ===== patch-v16.css ===== */
/* patch-v16.css - UI declutter + responsive polish + link styling */

/* --- Sections as cards (more padding / spacing) --- */
.section, .drawerSection{
  background: var(--panel, rgba(255,255,255,.04));
  border: 1px solid var(--border, rgba(255,255,255,.08));
  border-radius: var(--radius, 16px);
  padding: 14px;
  margin: 12px 0;
  box-shadow: var(--shadow, 0 10px 30px rgba(0,0,0,.20));
}
.section h2, .section h3{ margin: 0 0 10px 0; line-height: 1.2; }
.section p{ margin: 8px 0; }
.section .prose{ line-height: 1.65; }
.section .photoDesc, .section .imageDesc, .drawer-body .photoDesc, .drawer-body .imageDesc{ padding: 6px 2px; }

/* --- Drawer cards (details/summary) --- */
.drawer-card{ overflow: hidden; }
.drawer-summary{
  list-style: none; cursor: pointer;
  display: flex; align-items: center; justify-content: space-between;
  gap: 10px; padding: 10px 12px; border-radius: 12px;
  background: rgba(255,255,255,.03);
}
.drawer-summary::-webkit-details-marker{ display:none; }
.drawer-title{ font-weight: 700; }
.drawer-chevron{ opacity: .75; transition: transform .18s ease; }
.drawer-card[open] .drawer-chevron{ transform: rotate(180deg); }
.drawer-body{ padding: 10px 2px 2px 2px; }

/* --- Tiny circle toggles (no big buttons) --- */
.miniToggle, .miniInfo, .faToggle{
  width: 18px; height: 18px; border-radius: 999px;
  border: 1px solid var(--border, rgba(255,255,255,.18));
  background: rgba(255,255,255,.05);
  display: inline-flex; align-items: center; justify-content: center;
  vertical-align: middle; margin-inline-start: 8px; flex: 0 0 auto;
}
.miniToggle::before, .faToggle::before{ content: "FA"; font-size: 10px; opacity: .9; }
.miniInfo::before{ content: "i"; font-size: 12px; font-weight: 800; opacity: .9; }
.miniToggle:hover, .miniInfo:hover{ background: rgba(255,255,255,.09); }

/* --- Word links: no underline, theme-friendly highlight --- */
a.word-link{
  text-decoration: none !important; border-bottom: none !important;
  color: var(--accent, #4f9cf3);
  background: rgba(79,156,243,.10);
  padding: .05em .22em;
  border-radius: .35em;
  font-weight: 650;
}
a.word-link:hover{ background: rgba(79,156,243,.16); }

/* --- Vocab extra box --- */
.vocabMore{ margin-top: 10px; padding-top: 10px; border-top: 1px dashed var(--border, rgba(255,255,255,.18)); }
.vocabMore.hidden{ display:none; }
.errorSmall{ color: #ffb4b4; font-size: .92rem; }
.subTitle{ margin-top: 8px; font-weight: 750; opacity: .9; }

/* --- Tables spacing --- */
.tableWrap, .table-wrap, table{ margin: 10px 0 14px 0; }
.section table td, .section table th{ padding: 10px 10px; }

/* --- Horizontal scroll on mobile for dense rows (contexts/chips) --- */
@media (max-width: 640px){
  .pillScroll, .chips, .tagRow, .contextRow{
    overflow-x: auto; -webkit-overflow-scrolling: touch; white-space: nowrap;
    gap: 8px; padding-bottom: 4px;
  }
  .pill, .chipLink{ display: inline-flex; }
  .drawer-summary{ padding: 9px 10px; }
  .section, .drawerSection{ padding: 12px; }
}

/* --- Word page basics --- */
.wordHeader{ display: grid; gap: 8px; margin-bottom: 10px; }
.wordTitle{ margin: 0; }
.wordFaLine{ display: flex; align-items: center; gap: 10px; }
.wordFa{ font-size: 1.05rem; opacity: .92; }
.faHidden{ display:none; }
.metaGrid{
  display: grid; grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 10px; margin: 10px 0 14px 0;
}
.metaItem{
  background: rgba(255,255,255,.03);
  border: 1px solid var(--border, rgba(255,255,255,.08));
  border-radius: 14px; padding: 10px;
}
.metaKey{ font-size: .8rem; opacity: .7; }
.metaVal{ font-weight: 700; margin-top: 4px; }

@media (max-width: 720px){ .metaGrid{ grid-template-columns: 1fr; } }



/* === v17 UI polish: tighter toggles, lesson spacing, word details === */
.miniToggle{
  width:18px !important;
  height:18px !important;
  padding:0 !important;
  border-radius:50% !important;
  line-height:18px !important;
  font-size:12px !important;
}
.faToggle{
  gap:8px;
}
.faToggle .miniToggle{
  box-shadow:none !important;
}

.word-link{
  text-decoration:none !important;
  color: var(--accent) !important;
}
.word-link:hover{
  text-decoration:none !important;
  opacity:.92;
}

/* Lesson: photo description padding + table breathing room */
.image-desc, .photoDesc{
  padding:10px 12px !important;
  border-radius:14px;
  line-height:1.75;
}
.lessonHero .image-desc{
  background: rgba(255,255,255,.03);
}
p + table{ margin-top:14px; }
table + p{ margin-top:14px; }
.tableWrap{ margin-top:12px; }

/* Drawer summaries: keep them compact */
.drawer summary{
  padding:10px 12px !important;
}
.drawer summary::marker{ content:""; }
.drawer summary{
  list-style:none;
}
.drawer summary .drawerTitle{
  font-weight:700;
}

/* Word page meaning UI */
.meaningList{ display:grid; gap:12px; }
.meaningGroup{ padding:10px 12px; border-radius:16px; background: rgba(255,255,255,.03); }
.meaningPOS{ font-weight:800; margin-bottom:6px; }
.meaningUl{ margin:0; padding-left:18px; }
.meaningUl li{ margin:6px 0; }
.examplesTiny{ display:flex; gap:8px; align-items:flex-start; flex-wrap:wrap; }
.chip{ display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:999px; font-size:.78rem; background: rgba(255,255,255,.06); }
.chipWrap{ display:flex; flex-wrap:wrap; gap:8px; }
.chipLabel{ width:100%; margin-top:6px; font-weight:800; opacity:.85; }
.chipLink{
  text-decoration:none !important;
  padding:6px 10px;
  border-radius:999px;
  background: rgba(255,255,255,.05);
  color: var(--text) !important;
}
.chipLink:hover{ background: rgba(255,255,255,.08); }
.chipLinkAlt{ background: rgba(255,255,255,.04); opacity:.95; }

/* Mobile: make long context rows horizontally scrollable by default */
@media (max-width: 768px){
  .contextRow{
    overflow-x:auto;
    -webkit-overflow-scrolling: touch;
    gap:10px;
  }
  .contextRow > *{ min-width: 260px; }
}


/* ===== patch-v17.css ===== */
/* patch-v17.css — UI polish + responsive + declutter */
:root{
  --link-accent: var(--accent, #d4af37);
  --link-accent-2: var(--accent2, #6fd6ff);
}

/* Tiny FA reveal button (circle icon only) */
.fa-toggle-btn{display:inline-flex;align-items:center;justify-content:center;width:22px;height:22px;padding:0;border-radius:999px;}
.fa-toggle-btn svg{ width: 14px; height: 14px; }
.fa-toggle-btn:focus{ outline: 2px solid rgba(255,255,255,.25); outline-offset: 2px; }

/* Hide-reveal Persian blocks: nicer spacing */
.fa-hidden{ filter: blur(5px); opacity: .6; cursor: pointer; }
.fa-hidden:hover{ filter: blur(3px); opacity: .75; }
.fa-revealed{ filter: none; opacity: 1; }

.image-desc-box{ padding: 14px 14px; }
.image-desc{ margin: 0; line-height: 1.65; }
.image-desc + .image-desc{ margin-top: 8px; }

/* Tables: add breathing room + horizontal scroll on mobile */
.table-scroll{
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: 6px;
  margin-top: 10px;
}
.vocab-table{
  margin: 0;
  min-width: 720px;
}
@media (max-width: 820px){
  .vocab-table{ min-width: 640px; }
}

/* Word links inside lessons: no underline, theme-aware */
a.word-link{
  text-decoration: none !important;
  color: var(--link-accent-2);
  font-weight: 600;
}
a.word-link:hover{ opacity: .9; }
a.word-link:focus{ outline: 2px solid rgba(111,214,255,.35); outline-offset: 2px; border-radius: 6px; }

/* Lesson section switcher (tabs) */
.lesson-switcher{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin: 10px 0 14px;
}
.lesson-switcher .sw-btn{
  border-radius: 999px;
  padding: 8px 12px;
  font-weight: 700;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
}
.lesson-switcher .sw-btn[aria-pressed="true"]{
  background: rgba(111,214,255,.16);
  border-color: rgba(111,214,255,.28);
}

/* TOC chips on mobile */
@media (max-width: 820px){
  aside.lesson-toc{ display:none; }
  .toc-chips{
    display:flex;
    gap:8px;
    overflow-x:auto;
    padding: 8px 2px 10px;
    margin: 0 0 10px;
    -webkit-overflow-scrolling: touch;
  }
  .toc-chips a{
    white-space: nowrap;
    text-decoration:none;
    border-radius: 999px;
    padding: 7px 10px;
    border: 1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.05);
    color: inherit;
    font-weight: 650;
  }
}

/* Word page layout */
.word-hero{ display:flex; flex-wrap:wrap; align-items: baseline; gap:10px; margin: 6px 0 14px; }
.word-hero h1{ margin:0; font-size: clamp(26px, 4vw, 42px); }
.word-pill{ display:inline-flex; align-items:center; gap:6px; padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.06); }
.word-grid{ display:grid; grid-template-columns: 1.2fr .8fr; gap: 12px; }
@media (max-width: 900px){ .word-grid{ grid-template-columns: 1fr; } }
.word-card{ border-radius: 16px; padding: 14px; border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.04); }
.word-card h2{ margin:0 0 8px; font-size: 18px; }
.word-chips{ display:flex; flex-wrap:wrap; gap:8px; }
.word-chip{ padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,.14); background: rgba(255,255,255,.03); text-decoration:none; color: inherit; }
.word-chip:hover{ background: rgba(255,255,255,.06); }

/* Reduce "text stuck to borders" in generic cards */
.card, .panel, section.section{
  padding-left: 14px;
  padding-right: 14px;
}

.is-hidden{ display:none !important; }



/* ===== patch-v19 overrides ===== */

/* Small circular toggles (no text inside buttons) */
.miniInfo,
.faToggleBtn{
  width:18px;
  height:18px;
  min-width:18px;
  min-height:18px;
  padding:0;
  border-radius:999px;
  border:1px solid color-mix(in srgb, var(--accent, #5aa9ff) 55%, transparent);
  background: transparent;
  display:inline-grid;
  place-items:center;
  cursor:pointer;
}
.miniInfo::before{ content:"i"; font-size:11px; line-height:1; }
.faToggleBtn::before{content:'';} /* shows Persian toggle */

.miniInfo:hover,
.faToggleBtn:hover{
  background: color-mix(in srgb, var(--accent, #5aa9ff) 12%, transparent);
}

/* Word links: no underline, theme-aware, still distinct */
a.word-link{
  text-decoration:none !important;
  color: var(--accent, #5aa9ff);
  border-bottom: 0 !important;
}
a.word-link:hover,
a.word-link:focus{
  text-decoration:none !important;
  background: color-mix(in srgb, var(--accent, #5aa9ff) 10%, transparent);
  border-radius: 8px;
}

/* Better spacing for image description box */
.image-desc{
  padding: .75rem 1rem;
  line-height: 1.7;
}
.image-desc p{ margin: .35rem 0; }

/* Keep tables away from preceding text */
.section table{
  margin-top: .85rem;
}
.section .image-desc + table,
.section p + table{
  margin-top: 1rem;
}

/* Mobile: make TOC horizontally scrollable */
@media (max-width: 768px){
  .toc, .lessonToc, #lessonToc{
    overflow-x:auto;
    -webkit-overflow-scrolling: touch;
    white-space:nowrap;
  }
  .toc a, .lessonToc a, #lessonToc a{
    display:inline-block;
    margin-inline-end:.35rem;
  }
}

/* Drawer content spacing */
.drawerContent, .drawer .content{
  padding: .75rem 1rem;
}


.faToggleBtn svg{width:12px;height:12px;display:block;}


/* v20 UI spacing polish */
.image-desc-box{padding:16px 16px;}
.drawer-body table{margin-top:1rem;}
.drawer-body .tableWrap{margin-top:1rem;}


#themeToggle{width:34px;height:34px;padding:0;border-radius:999px;display:inline-flex;align-items:center;justify-content:center;line-height:1;font-size:16px;}
#themeToggle .label{display:none;}
